webpackJsonp([1],{154:function(e,t){},155:function(e,t){},156:function(e,t){},158:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(36),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};t.default={data:function(){return{signForm:{username:"yzj",pwd:"950812"},signInError:!1,isFetching:!1,signRules:{username:[{required:!0,message:"请输入用户名",trigger:"change"},{min:2,max:15,message:"长度在 2 到 115 个字符",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"change"},{min:5,max:20,message:"长度在 8 到 20 个字符",trigger:"blur"}]}}},components:{},methods:i({},n.i(a.b)([]),{handleSigninSubmit:function(){var e=this,t={username:this.signForm.username,pwd:this.signForm.pwd};this.$store.dispatch("userLogin",t).then(function(t){e.$message({type:"success",message:"登陆成功"}),e.$router.push("/machine")}).catch(function(t){e.$message({type:"error",message:"用户名或密码错误"}),console.log(t)})}})}},160:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(36),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};t.default={data:function(){return{machineFrom:{name:"",number:"",describe:"",reason:"",repairContent:"",breakoutTime:""},updateMachine:!1,newMachineBox:!1,dialogProjectFormVisible:!1,isProjectSaveFetching:!1,updateMachineId:""}},components:{},computed:n.i(a.a)(["getUserInfo"]),methods:i({},n.i(a.b)([]),{showNewClientBox:function(){this.machineFrom.name="",this.machineFrom.number="",this.machineFrom.describe="",this.machineFrom.reason="",this.machineFrom.repairContent="",this.machineFrom.breakoutTime="",this.updateMachine=!1,this.newMachineBox=!0},getAllMachine:function(){var e=this;this.$store.dispatch("getAllMachine",{}).then(function(t){e.$message({type:"success",message:"获取成功"})}).catch(function(t){e.$message({type:"error",message:"获取失败"}),console.log(t)})},newMachineSubmit:function(){var e=this;if(this.updateMachine){var t={id:this.updateMachineId,name:this.machineFrom.name,number:this.machineFrom.number,describe:this.machineFrom.describe,reason:this.machineFrom.reason,repairContent:this.machineFrom.repairContent};this.$store.dispatch("updateBadMachine",t).then(function(t){e.newMachineBox=!1,e.$message({type:"success",message:"更新成功"}),e.getAllMachine()}).catch(function(t){e.$message({type:"error",message:"更新失败"}),console.log(t)})}else{var t={name:this.machineFrom.name,number:this.machineFrom.number,describe:this.machineFrom.describe,reason:this.machineFrom.reason,repairContent:this.machineFrom.repairContent,breakoutTime:(new Date).getTime()-36e5*this.machineFrom.breakoutTime};this.$store.dispatch("newBadMachine",t).then(function(t){e.newMachineBox=!1,e.$message({type:"success",message:"添加成功"}),e.getAllMachine()}).catch(function(t){e.$message({type:"error",message:"添加失败"}),console.log(t)})}},deleteBadMachine:function(e){var t=this;this.$store.dispatch("deleteBadMachine",e).then(function(e){t.newMachineBox=!1,t.$message({type:"success",message:"删除成功"}),t.getAllMachine()}).catch(function(e){t.$message({type:"error",message:"删除失败"}),console.log(e)})},editBadMachine:function(e){this.updateMachine=!0,this.updateMachineId=e.id?e.id:"",this.machineFrom.name=e.name?e.name:"",this.machineFrom.number=e.number?e.number:"",this.machineFrom.describe=e.describe?e.describe:"",this.machineFrom.reason=e.reason?e.reason:"",this.machineFrom.repairContent=e.repairContent?e.repairContent:"",this.machineFrom.breakoutTime="此项不可修改",this.newMachineBox=!0}}),created:function(){}}},161:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),i=n(67),r=n.n(i),o=n(63),s=n.n(o),c=n(64),u=(n.n(c),n(65)),l=(n.n(u),n(66)),m=(n.n(l),n(61)),h=n(68),f=(n.n(h),n(62));a.default.use(s.a),a.default.config.productionTip=!1,n.i(h.sync)(f.a,m.a),new a.default({el:"#app",router:m.a,store:f.a,template:"<App/>",components:{App:r.a}})},162:function(e,t,n){function a(e){n(154)}var i=n(35)(n(159),n(164),a,null,null);e.exports=i.exports},163:function(e,t,n){function a(e){n(155)}var i=n(35)(n(160),n(165),a,null,null);e.exports=i.exports},164:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bimbox-container"},[e._m(0),e._v(" "),n("div",{staticClass:"login"},[n("el-form",{ref:"signForm",attrs:{model:e.signForm,rules:e.signRules},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.handleSigninSubmit(t)}}},[n("input",{staticStyle:{display:"none"}}),e._v(" "),e.signInError?n("el-alert",{attrs:{title:"登录错误提示",type:"error",description:e.signInError,"show-icon":""}}):e._e(),e._v(" "),n("br"),e._v(" "),n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{size:"large",placeholder:"用户名",autofocus:!0},model:{value:e.signForm.username,callback:function(t){e.signForm.username=t},expression:"signForm.username"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"fa fa-user"})])],2)],1),e._v(" "),n("el-form-item",{attrs:{prop:"pwd"}},[n("el-input",{attrs:{size:"large",type:"password",placeholder:"请输入密码"},model:{value:e.signForm.pwd,callback:function(t){e.signForm.pwd=t},expression:"signForm.pwd"}},[n("template",{slot:"prepend"},[n("i",{staticClass:"fa fa-lock"})])],2)],1),e._v(" "),n("el-form-item",[n("el-button",{staticStyle:{width:"100%"},attrs:{disabled:e.isFetching,loading:e.isFetching,size:"large",type:"primary"},on:{click:e.handleSigninSubmit}},[e._v("登录\n        ")])],1)],1)],1),e._v(" "),n("div",{staticClass:"footer"})])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title"},[n("h1",[e._v("坏机器管理系统")])])}]}},165:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bimbox-container"},[n("div",{staticClass:"nav"}),e._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.getUserInfo.machines}},[n("el-table-column",{attrs:{prop:"name",label:"机器名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"number",label:"型号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"describe",label:"描述"}}),e._v(" "),n("el-table-column",{attrs:{prop:"reason",label:"损坏原因"}}),e._v(" "),n("el-table-column",{attrs:{prop:"repairContent",label:"修复内容"}}),e._v(" "),n("el-table-column",{attrs:{prop:"breakoutTime",label:"损坏时间"}}),e._v(" "),n("el-table-column",{attrs:{label:"编辑"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",icon:"edit",size:"small"},on:{click:function(n){e.editBadMachine(t.row)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:function(n){e.deleteBadMachine(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("div",{staticStyle:{width:"100%"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.showNewClientBox}},[e._v("新增")]),e._v(" "),n("el-button",{attrs:{type:"info"},on:{click:e.getAllMachine}},[e._v("获取所有坏机器")])],1),e._v(" "),n("el-dialog",{attrs:{size:"large",title:"新增坏机器",validator:"false"},model:{value:e.newMachineBox,callback:function(t){e.newMachineBox=t},expression:"newMachineBox"}},[n("el-form",{ref:"clientBox",attrs:{"label-posit":"",ion:"top",model:e.machineFrom},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null}}},[n("el-form-item",{attrs:{label:"机器名称",prop:"name"}},[n("el-input",{ref:"machineName",attrs:{"auto-complete":"off",autofocus:e.dialogProjectFormVisible},model:{value:e.machineFrom.name,callback:function(t){e.machineFrom.name=t},expression:"machineFrom.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"型号",prop:"number"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.machineFrom.number,callback:function(t){e.machineFrom.number=t},expression:"machineFrom.number"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"描述",prop:"describe"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.machineFrom.describe,callback:function(t){e.machineFrom.describe=t},expression:"machineFrom.describe"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"损坏原因",prop:"reason"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.machineFrom.reason,callback:function(t){e.machineFrom.reason=t},expression:"machineFrom.reason"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"修复内容",prop:"repairContent"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.machineFrom.repairContent,callback:function(t){e.machineFrom.repairContent=t},expression:"machineFrom.repairContent"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"损坏时间",prop:"breakoutTime"}},[n("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入几小时以前损坏"},model:{value:e.machineFrom.breakoutTime,callback:function(t){e.machineFrom.breakoutTime=t},expression:"machineFrom.breakoutTime"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.newMachineBox=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",disabled:e.isProjectSaveFetching,loading:e.isProjectSaveFetching},on:{click:function(t){e.newMachineSubmit()}}},[e._v("确 定\n      ")])],1)],1),e._v(" "),n("div",{staticClass:"footer"})],1)},staticRenderFns:[]}},166:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}},171:function(e,t){},38:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var a="USER_LOGIN",i="GET_MACHINE"},61:function(e,t,n){"use strict";var a=n(2),i=n(168),r=n(162),o=n.n(r),s=n(163),c=n.n(s);a.default.use(i.a),t.a=new i.a({routes:[{path:"/",component:o.a},{path:"/machine",component:c.a}]})},62:function(e,t,n){"use strict";var a=n(2),i=n(36),r=n(96),o=n(94),s=n(95);a.default.use(i.c),t.a=new i.c.Store({getters:s,actions:o,modules:{Login:r.a}})},64:function(e,t){},65:function(e,t){},66:function(e,t){},67:function(e,t,n){function a(e){n(156)}var i=n(35)(n(158),n(166),a,null,null);e.exports=i.exports},91:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a="http://localhost:3000"},92:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return m});var a=n(2),i=n(167),r=n(91),o=n(93);n.n(o);a.default.use(i.a);var s=function(e){return a.default.http.post(r.a+"/user",e)},c=function(e){return a.default.http.post(r.a+"/allBadMachine",e)},u=function(e){return a.default.http.put(r.a+"/allBadMachine",e)},l=function(e){return a.default.http.post(r.a+"/allBadMachine/"+e.id,e)},m=function(e){return a.default.http.delete(r.a+"/allBadMachine/"+e.id)}},93:function(e,t,n){var a=n(157),i=a.Random;a.mock("http://test.cn",function(e){var t=JSON.parse(e.body);return"hmq"===t.username&&"123456"===t.pwd?{msg:"success",name:i.cname(),unit:i.city(),phone:i.char()}:{msg:"failed",errorcode:0}})},94:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"userLogin",function(){return s}),n.d(t,"getAllMachine",function(){return c}),n.d(t,"newBadMachine",function(){return u}),n.d(t,"updateBadMachine",function(){return l}),n.d(t,"deleteBadMachine",function(){return m});var a=n(98),i=n.n(a),r=n(92),o=n(38),s=function(e,t){var n=e.commit;return new i.a(function(e,a){setTimeout(function(){r.a(t).then(function(t){n(o.a,{res:t}),"success"===t.body.msg?e(t):a(t)}).catch(function(e){console.log(e),a(e)})},300)})},c=function(e,t){var n=e.commit;return new i.a(function(e,t){setTimeout(function(){r.b().then(function(a){n(o.b,{res:a}),"success"===a.body.msg?e(a):t(a)}).catch(function(e){t(e)})})})},u=function(e,t){var n=e.commit;return t.createUser=localStorage.username,new i.a(function(e,a){setTimeout(function(){r.c(t).then(function(t){n(o.b,{res:t}),"success"===t.body.msg?e(t):a(t)}).catch(function(e){a(e)})})})},l=function(e,t){e.commit;return t.createUser=localStorage.username,new i.a(function(e,n){setTimeout(function(){r.d(t).then(function(t){"success"===t.body.msg?e(t):n(t)}).catch(function(e){n(e)})})})},m=function(e,t){e.commit;return t.createUser=localStorage.username,new i.a(function(e,n){setTimeout(function(){r.e(t).then(function(t){"success"===t.body.msg?e(t):n(t)}).catch(function(e){n(e)})})})}},95:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"getUserInfo",function(){return a});var a=function(e){return e.Login}},96:function(e,t,n){"use strict";var a,i=n(99),r=n.n(i),o=n(38),s={user:"",machines:[]},c=(a={clearMachines:function(){s.machines=[]}},r()(a,o.a,function(e,t){if("success"!==t.res.body.msg)return!1;localStorage.username=t.res.body.username}),r()(a,o.b,function(e,t){if(console.log(t),"success"!==t.res.body.msg)return!1;e.machines=[];for(var n in t.res.body.machines){var a=t.res.body.machines[n];a.breakoutTime=new Date(a.breakoutTime).toLocaleString(),e.machines.push(a)}}),a);t.a={state:s,mutations:c}}},[161]);
//# sourceMappingURL=app.2df0d7ad3337318e7c98.js.map